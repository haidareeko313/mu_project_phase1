@tailwind base;
@tailwind components;
@tailwind utilities;

/* -------------------------------
   Dark theme palette (globals)
   ------------------------------- */
@layer base {
  :root {
    /* used for light mode if you ever enable it again */
    --fx-canvas: #0b1222;   /* page background */
    --fx-surface: #0f162b;  /* cards, panels */
    --fx-line: #1f2a44;     /* borders / dividers */
    --fx-chip: #162243;
    --fx-primary: #5b6cff;

    --fx-text-strong: #eef2ff;   /* pure readable text */
    --fx-text:        #d8e1ff;   /* normal text */
    --fx-subtle:      #a6b3d9;   /* labels/hints */
  }

  html.dark body {
    @apply antialiased;
    background-color: var(--fx-canvas);
    color: var(--fx-text);
  }

  /* Make headings readable on dark */
  html.dark h1, html.dark h2, html.dark h3, html.dark h4, html.dark h5, html.dark h6 {
    color: var(--fx-text-strong);
  }
}

/* -------------------------------
   Components (cards, tables, inputs)
   ------------------------------- */
@layer components {
  /* Generic card (covers your KPI/summary tiles) */
  .fx-card {
    @apply rounded-lg border p-4 shadow-sm transition-colors;
    background-color: var(--fx-surface);
    border-color: var(--fx-line);
    color: var(--fx-text);
  }

  /* Titles inside cards / sections */
  .fx-section-title {
    @apply text-base font-semibold tracking-wide;
    color: var(--fx-text-strong);
  }

  /* KPI card — apply these in any page (or let the generic overrides below catch your current markup) */
  .fx-kpi { @apply fx-card flex flex-col gap-1; }
  .fx-kpi .fx-kpi-label {
    @apply text-xs font-medium uppercase;
    color: var(--fx-subtle);
  }
  .fx-kpi .fx-kpi-value {
    @apply text-2xl font-semibold;
    color: var(--fx-text-strong);
  }

  /* Buttons */
  .fx-btn {
    @apply inline-flex items-center gap-2 rounded-md px-3 py-2 text-sm font-medium transition-colors;
  }
  .fx-btn-primary {
    @apply fx-btn text-white;
    background-color: var(--fx-primary);
  }

  /* Inputs & selects */
  .fx-input {
    @apply rounded-md border px-3 py-2 text-sm;
    background-color: #0f1832;
    border-color: var(--fx-line);
    color: var(--fx-text-strong);
  }
  .fx-input::placeholder {
    color: var(--fx-subtle);
    opacity: 1;
  }

  /* Tables (works for Orders, Inventory Logs, Payments) */
  .fx-table-wrapper { @apply overflow-hidden rounded-lg border; border-color: var(--fx-line); }
  .fx-table { @apply min-w-full text-sm; }
  .fx-thead { background-color: #0f1830; }
  .fx-th { @apply px-4 py-3 font-semibold text-left; color: var(--fx-text-strong); }
  .fx-td { @apply px-4 py-3; color: var(--fx-text); }
  .fx-tr { @apply border-t; border-color: var(--fx-line); }
  .fx-tr:hover { background-color: #111d3b; }
}

/* -------------------------------------------
   ZERO-JS retrofits (target your existing markup)
   This makes your current tiles, tables & inputs
   render correctly in dark without changing pages.
   ------------------------------------------- */

/* Your summary tiles are usually:
   <div class="rounded-lg border bg-white p-4"> with
   a small label and a big number inside.
   Turn them into dark cards automatically. */
html.dark .rounded-lg.border.bg-white.p-4 {
  background-color: var(--fx-surface) !important;
  border-color: var(--fx-line) !important;
  color: var(--fx-text) !important;
}
html.dark .rounded-lg.border.bg-white.p-4 .text-sm { color: var(--fx-subtle) !important; }
html.dark .rounded-lg.border.bg-white.p-4 .text-xl,
html.dark .rounded-lg.border.bg-white.p-4 .text-2xl,
html.dark .rounded-lg.border.bg-white.p-4 .font-semibold {
  color: var(--fx-text-strong) !important;   /* <- KPI numbers become bright and readable */
}

/* Tables that were created with Tailwind utilities only */
html.dark table thead { background-color: #0f1830 !important; }
html.dark table thead th {
  color: var(--fx-text-strong) !important;
  font-weight: 600 !important;
}
html.dark table tbody td { color: var(--fx-text) !important; }
html.dark table tr { border-color: var(--fx-line) !important; }
html.dark table tr:hover { background-color: #111d3b !important; }

/* Form controls created without the fx-input helper */
html.dark input,
html.dark select,
html.dark textarea {
  background-color: #0f1832 !important;
  border-color: var(--fx-line) !important;
  color: var(--fx-text-strong) !important;
}
html.dark input::placeholder,
html.dark textarea::placeholder {
  color: var(--fx-subtle) !important;
  opacity: 1 !important;
}

/* Chips/labels */
html.dark .fx-chip { background-color: var(--fx-chip); color: var(--fx-text); }

/* Links inside dark tables (Edit/Delete) keep contrast */
html.dark a { color: #8aa4ff; }
html.dark a:hover { color: #b6c3ff; }
/* --- Fix table text visibility in dark mode --- */
html.dark .fx-table th,
html.dark .fx-table td {
  color: #e5e7eb !important; /* Tailwind's slate-200 for better contrast */
}

/* Keep header slightly brighter than cells */
html.dark .fx-table th {
  color: #f9fafb !important; /* Tailwind's slate-50 */
  font-weight: 600;
}
/* =========================================================================
   UNIFIED DARK TABLE THEME  — matches Payments page across all tables
   ========================================================================= */

/* Wrapper/border polish (applies when tables are wrapped in divs) */
html.dark .fx-table-wrapper {
  border: 1px solid #1f2a44;         /* subtle border */
  border-radius: 12px;               /* soft corners */
  overflow: hidden;                  /* mask header radius */
  background: transparent;
}

/* Always-readable text in dark mode (headers + cells) */
html.dark table thead th,
html.dark table tbody td {
  color: #e5e7eb !important;         /* slate-200 */
  border-color: #1f2a44 !important;  /* unify borders */
}

/* Header background + typography */
html.dark table thead {
  background: #0f1830 !important;    /* same as Payments header */
}
html.dark table thead th {
  color: #f9fafb !important;         /* slate-50 for strong contrast */
  font-weight: 600;
}

/* Body rows (striped) */
html.dark table tbody tr {
  background: #0b1224 !important;    /* base row bg */
}
html.dark table tbody tr:nth-child(even) {
  background: #0d152d !important;    /* alternating row bg */
}

/* Hover feedback (same tone as Payments table) */
html.dark table tbody tr:hover {
  background: #162449 !important;    /* deep indigo hover */
}

/* Row divider line (keeps rows visually separated) */
html.dark table tbody tr {
  border-top: 1px solid #1f2a44 !important;
}

/* Keep controls readable inside cells (selects/badges/etc.) */
html.dark table select,
html.dark table input,
html.dark table button,
html.dark table a {
  color: #e5e7eb;
}

/* Optional: if your table is already inside a rounded card,
   this gives it a subtle elevated look to match Payments. */
html.dark .fx-table-card {
  background: transparent;
  border-radius: 12px;
  box-shadow: 0 1px 0 0 rgba(255,255,255,0.02) inset,
              0 12px 24px -8px rgba(3,7,18,0.6);
}

/* If any page previously forced low-contrast gray text,
   this ensures the table content stays readable. */
html.dark .text-slate-500,
html.dark .text-slate-600,
html.dark .text-slate-700,
html.dark .text-gray-500,
html.dark .text-gray-600,
html.dark .text-gray-700 {
  color: #e5e7eb !important;
}
/* =========================================================================
   DARK FIX — convert light filter panels (bg-white) to dark cards automatically
   ========================================================================= */

/* Any panel that was styled with light utilities (bg-white, border, shadow)
   will be converted to your dark "card" look. This safely affects the
   Inventory Logs filter row, Orders filter (if any), and similar toolbars. */
html.dark .bg-white {
  background-color: var(--fx-surface) !important;
  color: var(--fx-text) !important;
}

/* Common light borders -> dark line */
html.dark .border,
html.dark .border-gray-100,
html.dark .border-gray-200,
html.dark .border-slate-100,
html.dark .border-slate-200 {
  border-color: var(--fx-line) !important;
}

/* Headings/text inside those panels stay readable */
html.dark .text-gray-900,
html.dark .text-slate-900 {
  color: var(--fx-text-strong) !important;
}
html.dark .text-gray-700,
html.dark .text-slate-700,
html.dark .text-gray-600,
html.dark .text-slate-600 {
  color: var(--fx-text) !important;
}

/* Inputs/selects/date pickers inside those panels */
html.dark .bg-white input,
html.dark .bg-white select,
html.dark .bg-white textarea {
  background-color: #0f1832 !important;
  border-color: var(--fx-line) !important;
  color: var(--fx-text-strong) !important;
}
html.dark .bg-white input::placeholder,
html.dark .bg-white textarea::placeholder {
  color: var(--fx-subtle) !important;
  opacity: 1 !important;
}

/* If the panel used a very light background utility (sometimes added by components),
   darken it to match your card tone */
html.dark .bg-gray-50,
html.dark .bg-slate-50,
html.dark .bg-gray-100,
html.dark .bg-slate-100 {
  background-color: var(--fx-surface) !important;
}

/* Keep the icon buttons (like calendar) visible */
html.dark .bg-white svg,
html.dark .bg-white [class*="icon"] {
  color: var(--fx-text) !important;
  fill: currentColor !important;
}
